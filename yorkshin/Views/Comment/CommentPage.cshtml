@{
    ViewBag.Title = "Book";
    Layout = "_AsiLayout";
}

<div id="" class="container">
    <!-- comment rating-->
    <div class="start_comment">
        <div class="row">
            <div class="col-lg-12">
                <div class="star-rating p-3">
                    <span >5.0/5</span>
                    <span class="fa fa-star" data-rating="1"></span>
                    <span class="fa fa-star" data-rating="2"></span>
                    <span class="fa fa-star" data-rating="3"></span>
                    <span class="fa fa-star" data-rating="4"></span>
                    <span class="fa fa-star" data-rating="5"></span>
                    <input type="hidden" name="whatever1" class="rating-value" value="2.56">
                </div>
            </div>
        </div>
    </div>
    <!-- comment rating -->
    <!-- comment board-->
    @model List<yorkshin.ViewModels.CommentListViewModel>
    @foreach (var comment in Model)
    {
        <div class="comment_board border-bottom">
            <div class="row mb-3">
                <p>
                    <span class="font-weight-bold">@comment.BuyerUname </span>
                    <!-- <span class="font-weight-bold">comment.UserName</span>  -->
                </p>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="comment-start" data-ranking="@comment.Ranking">
                            <span class="rating-value">@comment.Ranking</span>
                            <span class="fa fa-star" data-rating="1"></span>
                            <span class="fa fa-star" data-rating="2"></span>
                            <span class="fa fa-star" data-rating="3"></span>
                            <span class="fa fa-star" data-rating="4"></span>
                            <span class="fa fa-star" data-rating="5"></span>
                            <input type="hidden" name="whatever1" class="rating-value" value="@comment.Ranking">
                        </div>
                    </div>
                </div>
                <!-- comment time -->
                <p class="text-muted">@comment.CommentDate</p>
                <!-- comment time -->
                <!-- comment Content -->
                <p>@comment.BuyerReview</p>

                <!-- comment Content -->

                <div class="col-sm-2">
                    <img src="/Images/product-img.jpg" width="200px" alt="book img"/>
                </div>
                <div class="col-sm-10" style="background-color: #f8f9fa ;font-weight: bolder;">
                    <p>@comment.BookName</p>
                    <p>作者名稱 @comment.BookAuthor </p>
                    <!-- <p>book.name</p> -->
                    <!-- <p>作者名稱 book.author </p> -->
                </div>
            </div>
            <!-- } -->
        </div>
        <script>
        // 當文件載入完成後執行
        $(document).ready(function() {
            let star_rating = $('.comment-start[data-ranking="@comment.Ranking"] .fa');
            SetRatingStar(star_rating);

            function SetRatingStar(star_rating) {
                let rankingValue = parseInt(star_rating.siblings('.rating-value').text());
                let previous = parseInt(star_rating.siblings('input.rating-value').val());
                console.log("previous => rankingValue", previous,rankingValue)
                star_rating.each(function() {
                    if (rankingValue >= previous) {
                        /*加分*/
                        $(this).removeClass('fa-star-o').addClass('fa-star');
                    } else {
                        /*扣分*/
                        $(this).removeClass('fa-star').addClass('fa-star-o');
                    }
                });
            }
        });
        </script>
    }
    <!-- comment board-->
    <div class="d-flex justify-content-center mx-auto">
        <button type="button" class="btn btn-outline-dark mx-auto">
            更多
            <i class="fa fa-angle-double-right" aria-hidden="true"></i>
        </button>
    </div>
</div>
